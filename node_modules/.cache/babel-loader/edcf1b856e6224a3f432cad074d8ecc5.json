{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/rakshit/Desktop/webdev/mb/project/capstone-team2/frontend/src/pages/Checkout.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport * as TiIcons from \"react-icons/ti\";\nimport * as FaIcons from \"react-icons/fa\";\nimport logo from './img/logo.webp';\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { empty_cart_handle } from \"../actions/prostore\";\n\nfunction paymentHandler(src) {\n  return new Promise(resolve => {\n    const script = document.createElement(\"script\");\n    script.src = src;\n\n    script.onload = () => {\n      resolve(true);\n    };\n\n    script.onerror = () => {\n      resolve(false);\n    };\n\n    document.body.appendChild(script);\n  });\n}\n\nfunction Checkout({\n  isAuthenticated,\n  Cartvalue,\n  User,\n  EMPTY_TO_CART\n}) {\n  _s();\n\n  const [orderdata, setorderdata] = useState(0);\n  var Total = 0;\n  Cartvalue.map(Cartvalue => Total = Total + Cartvalue.price * Cartvalue.qty);\n  var ProdID = [];\n  Cartvalue.map(Cartvalue => ProdID.push(Cartvalue.id));\n  var order_id = 0;\n\n  async function displayRazorpay() {\n    const res = await paymentHandler(\"https://checkout.razorpay.com/v1/checkout.js\");\n\n    if (!res) {\n      alert(\"Razorpay SDK failed! Are You Online?\");\n      return;\n    }\n\n    const body = JSON.stringify({\n      Total: Total.toString()\n    });\n    const reds = await axios.post(`${process.env.REACT_APP_API_URL}/api/order/test/`, body);\n    var options = {\n      key: \"rzp_test_qcQMd5GfJhZAyQ\",\n      amount: reds.data[\"amount\"],\n      currency: reds.data[\"currency\"],\n      name: \"Ashion\",\n      description: \"Thank You For Freaking!\",\n      image: logo,\n      order_id: reds.data[\"id\"],\n      handler: function (response) {\n        const orderdetail = JSON.stringify({\n          id: User.id,\n          user: User.id,\n          total: Total,\n          payment_id: response.razorpay_payment_id,\n          order_id: response.razorpay_order_id,\n          signature: response.razorpay_signature\n        });\n        axios.post(`${process.env.REACT_APP_API_URL}/api/orderdetail/`, orderdetail).then(function (response) {\n          order_id = response.data[\"id\"];\n\n          for (var i = 0; i < Cartvalue.length; i++) {\n            const orderitemdetail = JSON.stringify({\n              order: order_id,\n              qty: Cartvalue[i][\"qty\"],\n              product: Cartvalue[i][\"id\"]\n            });\n            axios.post(`${process.env.REACT_APP_API_URL}/api/orderitemdetail/`, orderitemdetail);\n          }\n\n          toast(\"You order Is confirm \"); // setorderdata(1);\n          // empty_cart_handle(10)\n\n          const deleteToCart = async id => {\n            await dispatch(load_product_actions.delete_to_cart_handle(id));\n          };\n\n          deleteToCart(1); // setInterval(submitorderfunc, 4000);\n        });\n      },\n      prefill: {\n        name: User.first_name,\n        email: User.email,\n        contact: User.phone\n      }\n    };\n    const paymentObject = new window.Razorpay(options);\n    paymentObject.open();\n  }\n\n  function submitorderfunc() {\n    setorderdata(1);\n  }\n\n  if (orderdata) return /*#__PURE__*/_jsxDEV(Redirect, {\n    to: \"/\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 25\n  }, this);\n  if (!isAuthenticated) return /*#__PURE__*/_jsxDEV(Redirect, {\n    to: \"/login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 32\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"checkout\",\n    children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"breadcrumb-option\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"col-lg-12\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"breadcrumb__links\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: \"/\",\n                children: [/*#__PURE__*/_jsxDEV(TiIcons.TiHome, {\n                  className: \"homeIcon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 19\n                }, this), \" Home\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FaIcons.FaAngleRight, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Shopping cart\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      class: \"checkout spad\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"checkout__form\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"col-lg-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                children: \"Billing detail\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"col-lg-6 col-md-6 col-sm-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"checkout__form__input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"First Name \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 154,\n                        columnNumber: 36\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 153,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      disabled: true,\n                      value: User.first_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 156,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 152,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"col-lg-6 col-md-6 col-sm-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"checkout__form__input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Last Name \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 162,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 161,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      disabled: true,\n                      value: User.last_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 164,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"col-lg-12\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"checkout__form__input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Address \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 170,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 169,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      disabled: true,\n                      value: User.address\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 172,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"checkout__form__input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Phone \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 176,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 175,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      disabled: true,\n                      value: User.phone\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 178,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"checkout__form__input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Email \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 182,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 181,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      disabled: true,\n                      value: User.email\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 184,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"col-lg-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"checkout__order\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  children: \"Your order\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"checkout__order__product\",\n                  children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        class: \"top__text\",\n                        children: \"Product\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 195,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        class: \"top__text__right\",\n                        children: \"Total\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 197,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 194,\n                      columnNumber: 23\n                    }, this), Cartvalue.map((Cartvalue, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [index + 1, \".\", Cartvalue.title, /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: [\"$\", Cartvalue.price * Cartvalue.qty, \".00\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 203,\n                        columnNumber: 27\n                      }, this)]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 201,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"checkout__order__total\",\n                  children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [\"Subtotal \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: [\"$\", Total, \".00\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 211,\n                        columnNumber: 34\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 210,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [\"Total \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: [\"$\", Total, \".00\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 214,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 213,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  class: \"site-btn\",\n                  onClick: displayRazorpay,\n                  children: \"Place oder\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Checkout, \"dHFYI2GFI2p0736N07TnddCRH48=\");\n\n_c = Checkout;\n\nconst mapStateToProps = state => ({\n  Cartvalue: state.prostore.Cartvalue,\n  isAuthenticated: state.auth.isAuthenticated,\n  User: state.auth.user\n});\n\nexport default connect(mapStateToProps, {\n  empty_cart_handle\n})(Checkout); // export default connect(mapStateToProps, { login })(Login);\n\nvar _c;\n\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"sources":["/home/rakshit/Desktop/webdev/mb/project/capstone-team2/frontend/src/pages/Checkout.js"],"names":["React","useState","Link","Redirect","connect","axios","TiIcons","FaIcons","logo","ToastContainer","toast","empty_cart_handle","paymentHandler","src","Promise","resolve","script","document","createElement","onload","onerror","body","appendChild","Checkout","isAuthenticated","Cartvalue","User","EMPTY_TO_CART","orderdata","setorderdata","Total","map","price","qty","ProdID","push","id","order_id","displayRazorpay","res","alert","JSON","stringify","toString","reds","post","process","env","REACT_APP_API_URL","options","key","amount","data","currency","name","description","image","handler","response","orderdetail","user","total","payment_id","razorpay_payment_id","razorpay_order_id","signature","razorpay_signature","then","i","length","orderitemdetail","order","product","deleteToCart","dispatch","load_product_actions","delete_to_cart_handle","prefill","first_name","email","contact","phone","paymentObject","window","Razorpay","open","submitorderfunc","last_name","address","index","title","mapStateToProps","state","prostore","auth"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,IAAT,EAAeC,QAAf,QAA+B,kBAA/B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,OAAZ,MAAyB,gBAAzB;AACA,OAAO,KAAKC,OAAZ,MAAyB,gBAAzB;AACA,OAAOC,IAAP,MAAiB,iBAAjB;AACA,SAASC,cAAT,EAAyBC,KAAzB,QAAsC,gBAAtC;AACA,OAAO,uCAAP;AACA,SAAQC,iBAAR,QAAgC,qBAAhC;;AAEA,SAASC,cAAT,CAAwBC,GAAxB,EAA6B;AAC3B,SAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AAC9B,UAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACAF,IAAAA,MAAM,CAACH,GAAP,GAAaA,GAAb;;AACAG,IAAAA,MAAM,CAACG,MAAP,GAAgB,MAAM;AACpBJ,MAAAA,OAAO,CAAC,IAAD,CAAP;AACD,KAFD;;AAGAC,IAAAA,MAAM,CAACI,OAAP,GAAiB,MAAM;AACrBL,MAAAA,OAAO,CAAC,KAAD,CAAP;AACD,KAFD;;AAGAE,IAAAA,QAAQ,CAACI,IAAT,CAAcC,WAAd,CAA0BN,MAA1B;AACD,GAVM,CAAP;AAWD;;AAED,SAASO,QAAT,CAAkB;AAAEC,EAAAA,eAAF;AAAmBC,EAAAA,SAAnB;AAA8BC,EAAAA,IAA9B;AAAmCC,EAAAA;AAAnC,CAAlB,EAAsE;AAAA;;AAEpE,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4B5B,QAAQ,CAAC,CAAD,CAA1C;AAEA,MAAI6B,KAAK,GAAG,CAAZ;AACAL,EAAAA,SAAS,CAACM,GAAV,CACGN,SAAD,IAAgBK,KAAK,GAAGA,KAAK,GAAGL,SAAS,CAACO,KAAV,GAAkBP,SAAS,CAACQ,GAD9D;AAGA,MAAIC,MAAM,GAAG,EAAb;AACAT,EAAAA,SAAS,CAACM,GAAV,CAAeN,SAAD,IAAeS,MAAM,CAACC,IAAP,CAAYV,SAAS,CAACW,EAAtB,CAA7B;AACA,MAAIC,QAAQ,GAAG,CAAf;;AAEA,iBAAeC,eAAf,GAAiC;AAC/B,UAAMC,GAAG,GAAG,MAAM3B,cAAc,CAC9B,8CAD8B,CAAhC;;AAGA,QAAI,CAAC2B,GAAL,EAAU;AACRC,MAAAA,KAAK,CAAC,sCAAD,CAAL;AACA;AACD;;AAED,UAAMnB,IAAI,GAAGoB,IAAI,CAACC,SAAL,CAAe;AAAEZ,MAAAA,KAAK,EAAEA,KAAK,CAACa,QAAN;AAAT,KAAf,CAAb;AACA,UAAMC,IAAI,GAAG,MAAMvC,KAAK,CAACwC,IAAN,CAChB,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,kBADhB,EAEjB3B,IAFiB,CAAnB;AAKA,QAAI4B,OAAO,GAAG;AACZC,MAAAA,GAAG,EAAE,yBADO;AAEZC,MAAAA,MAAM,EAAEP,IAAI,CAACQ,IAAL,CAAU,QAAV,CAFI;AAGZC,MAAAA,QAAQ,EAAET,IAAI,CAACQ,IAAL,CAAU,UAAV,CAHE;AAIZE,MAAAA,IAAI,EAAE,QAJM;AAKZC,MAAAA,WAAW,EAAE,yBALD;AAMZC,MAAAA,KAAK,EAAEhD,IANK;AAOZ6B,MAAAA,QAAQ,EAAEO,IAAI,CAACQ,IAAL,CAAU,IAAV,CAPE;AAQZK,MAAAA,OAAO,EAAE,UAAUC,QAAV,EAAoB;AAC3B,cAAMC,WAAW,GAAGlB,IAAI,CAACC,SAAL,CAAe;AACjCN,UAAAA,EAAE,EAAEV,IAAI,CAACU,EADwB;AAEjCwB,UAAAA,IAAI,EAAElC,IAAI,CAACU,EAFsB;AAGjCyB,UAAAA,KAAK,EAAE/B,KAH0B;AAIjCgC,UAAAA,UAAU,EAAEJ,QAAQ,CAACK,mBAJY;AAKjC1B,UAAAA,QAAQ,EAAEqB,QAAQ,CAACM,iBALc;AAMjCC,UAAAA,SAAS,EAAEP,QAAQ,CAACQ;AANa,SAAf,CAApB;AAQA7D,QAAAA,KAAK,CACFwC,IADH,CAEK,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,mBAFrC,EAGIW,WAHJ,EAKGQ,IALH,CAKQ,UAAUT,QAAV,EAAoB;AACxBrB,UAAAA,QAAQ,GAAGqB,QAAQ,CAACN,IAAT,CAAc,IAAd,CAAX;;AAEA,eAAK,IAAIgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3C,SAAS,CAAC4C,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACzC,kBAAME,eAAe,GAAG7B,IAAI,CAACC,SAAL,CAAe;AACrC6B,cAAAA,KAAK,EAAElC,QAD8B;AAErCJ,cAAAA,GAAG,EAAER,SAAS,CAAC2C,CAAD,CAAT,CAAa,KAAb,CAFgC;AAGrCI,cAAAA,OAAO,EAAE/C,SAAS,CAAC2C,CAAD,CAAT,CAAa,IAAb;AAH4B,aAAf,CAAxB;AAKA/D,YAAAA,KAAK,CAACwC,IAAN,CACG,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,uBADnC,EAEEsB,eAFF;AAID;;AACD5D,UAAAA,KAAK,CAAC,uBAAD,CAAL,CAdwB,CAexB;AAEA;;AACA,gBAAM+D,YAAY,GAAG,MAAOrC,EAAP,IAAc;AACjC,kBAAMsC,QAAQ,CAACC,oBAAoB,CAACC,qBAArB,CAA2CxC,EAA3C,CAAD,CAAd;AACD,WAFD;;AAGAqC,UAAAA,YAAY,CAAC,CAAD,CAAZ,CArBwB,CAsBxB;AAED,SA7BH;AA8BD,OA/CW;AAgDZI,MAAAA,OAAO,EAAE;AACPvB,QAAAA,IAAI,EAAE5B,IAAI,CAACoD,UADJ;AAEPC,QAAAA,KAAK,EAAErD,IAAI,CAACqD,KAFL;AAGPC,QAAAA,OAAO,EAAEtD,IAAI,CAACuD;AAHP;AAhDG,KAAd;AAuDA,UAAMC,aAAa,GAAG,IAAIC,MAAM,CAACC,QAAX,CAAoBnC,OAApB,CAAtB;AACAiC,IAAAA,aAAa,CAACG,IAAd;AACD;;AAID,WAASC,eAAT,GAA2B;AAEzBzD,IAAAA,YAAY,CAAC,CAAD,CAAZ;AACD;;AAED,MAAID,SAAJ,EAAe,oBAAO,QAAC,QAAD;AAAU,IAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,UAAP;AAGf,MAAI,CAACJ,eAAL,EAAsB,oBAAO,QAAC,QAAD;AAAU,IAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,UAAP;AAGtB,sBACE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA,4BACE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAK,MAAA,KAAK,EAAC,mBAAX;AAAA,6BACE;AAAK,QAAA,KAAK,EAAC,WAAX;AAAA,+BACE;AAAK,UAAA,KAAK,EAAC,KAAX;AAAA,iCACE;AAAK,YAAA,KAAK,EAAC,WAAX;AAAA,mCACE;AAAK,cAAA,KAAK,EAAC,mBAAX;AAAA,sCACE,QAAC,IAAD;AAAM,gBAAA,EAAE,EAAC,GAAT;AAAA,wCACE,QAAC,OAAD,CAAS,MAAT;AAAgB,kBAAA,SAAS,EAAC;AAA1B;AAAA;AAAA;AAAA;AAAA,wBADF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE,QAAC,OAAD,CAAS,YAAT;AAAA;AAAA;AAAA;AAAA,sBAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBALF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAFF,eAkBE;AAAS,MAAA,KAAK,EAAC,eAAf;AAAA,6BACE;AAAK,QAAA,KAAK,EAAC,WAAX;AAAA,+BACE;AAAK,UAAA,KAAK,EAAC,gBAAX;AAAA,iCACE;AAAK,YAAA,KAAK,EAAC,KAAX;AAAA,oCACE;AAAK,cAAA,KAAK,EAAC,UAAX;AAAA,sCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAK,gBAAA,KAAK,EAAC,KAAX;AAAA,wCACE;AAAK,kBAAA,KAAK,EAAC,4BAAX;AAAA,yCACE;AAAK,oBAAA,KAAK,EAAC,uBAAX;AAAA,4CACE;AAAA,6DACa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADb;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,eAIE;AAAO,sBAAA,IAAI,EAAC,MAAZ;AAAmB,sBAAA,QAAQ,MAA3B;AAA4B,sBAAA,KAAK,EAAEE,IAAI,CAACoD;AAAxC;AAAA;AAAA;AAAA;AAAA,4BAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBADF,eASE;AAAK,kBAAA,KAAK,EAAC,4BAAX;AAAA,yCACE;AAAK,oBAAA,KAAK,EAAC,uBAAX;AAAA,4CACE;AAAA,4DACY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADZ;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,eAIE;AAAO,sBAAA,IAAI,EAAC,MAAZ;AAAmB,sBAAA,QAAQ,MAA3B;AAA4B,sBAAA,KAAK,EAAEpD,IAAI,CAAC6D;AAAxC;AAAA;AAAA;AAAA;AAAA,4BAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBATF,eAiBE;AAAK,kBAAA,KAAK,EAAC,WAAX;AAAA,0CACE;AAAK,oBAAA,KAAK,EAAC,uBAAX;AAAA,4CACE;AAAA,0DACU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADV;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,eAIE;AAAO,sBAAA,IAAI,EAAC,MAAZ;AAAmB,sBAAA,QAAQ,MAA3B;AAA4B,sBAAA,KAAK,EAAE7D,IAAI,CAAC8D;AAAxC;AAAA;AAAA;AAAA;AAAA,4BAJF;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAOE;AAAK,oBAAA,KAAK,EAAC,uBAAX;AAAA,4CACE;AAAA,wDACQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADR;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,eAIE;AAAO,sBAAA,IAAI,EAAC,MAAZ;AAAmB,sBAAA,QAAQ,MAA3B;AAA4B,sBAAA,KAAK,EAAE9D,IAAI,CAACuD;AAAxC;AAAA;AAAA;AAAA;AAAA,4BAJF;AAAA;AAAA;AAAA;AAAA;AAAA,0BAPF,eAaE;AAAK,oBAAA,KAAK,EAAC,uBAAX;AAAA,4CACE;AAAA,wDACQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADR;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,eAIE;AAAO,sBAAA,IAAI,EAAC,MAAZ;AAAmB,sBAAA,QAAQ,MAA3B;AAA4B,sBAAA,KAAK,EAAEvD,IAAI,CAACqD;AAAxC;AAAA;AAAA;AAAA;AAAA,4BAJF;AAAA;AAAA;AAAA;AAAA;AAAA,0BAbF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAjBF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eA0CE;AAAK,cAAA,KAAK,EAAC,UAAX;AAAA,qCACE;AAAK,gBAAA,KAAK,EAAC,iBAAX;AAAA,wCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAK,kBAAA,KAAK,EAAC,0BAAX;AAAA,yCACE;AAAA,4CACE;AAAA,8CACE;AAAM,wBAAA,KAAK,EAAC,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,eAGE;AAAM,wBAAA,KAAK,EAAC,kBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAHF;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,EAMGtD,SAAS,CAACM,GAAV,CAAc,CAACN,SAAD,EAAYgE,KAAZ,kBAEb;AAAA,iCACGA,KAAK,GAAG,CADX,OACehE,SAAS,CAACiE,KADzB,eAEE;AAAA,wCAAQjE,SAAS,CAACO,KAAV,GAAkBP,SAAS,CAACQ,GAApC;AAAA;AAAA;AAAA;AAAA;AAAA,8BAFF;AAAA,uBAASwD,KAAT;AAAA;AAAA;AAAA;AAAA,4BAFD,CANH;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBAFF,eAkBE;AAAK,kBAAA,KAAK,EAAC,wBAAX;AAAA,yCACE;AAAA,4CACE;AAAA,2DACW;AAAA,wCAAQ3D,KAAR;AAAA;AAAA;AAAA;AAAA;AAAA,8BADX;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,eAIE;AAAA,wDACQ;AAAA,wCAAQA,KAAR;AAAA;AAAA;AAAA;AAAA;AAAA,8BADR;AAAA;AAAA;AAAA;AAAA;AAAA,4BAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBAlBF,eA6BE;AACE,kBAAA,IAAI,EAAC,QADP;AAEE,kBAAA,KAAK,EAAC,UAFR;AAGE,kBAAA,OAAO,EAAEQ,eAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBA7BF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBA1CF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAlBF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA6GD;;GAhNQf,Q;;KAAAA,Q;;AAkNT,MAAMoE,eAAe,GAAIC,KAAD,KAAY;AAClCnE,EAAAA,SAAS,EAAEmE,KAAK,CAACC,QAAN,CAAepE,SADQ;AAElCD,EAAAA,eAAe,EAAEoE,KAAK,CAACE,IAAN,CAAWtE,eAFM;AAGlCE,EAAAA,IAAI,EAAEkE,KAAK,CAACE,IAAN,CAAWlC;AAHiB,CAAZ,CAAxB;;AAMA,eAAexD,OAAO,CAACuF,eAAD,EAAiB;AAAChF,EAAAA;AAAD,CAAjB,CAAP,CAA6CY,QAA7C,CAAf,C,CACA","sourcesContent":["import React, { useState } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport * as TiIcons from \"react-icons/ti\";\nimport * as FaIcons from \"react-icons/fa\";\nimport logo from './img/logo.webp';\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport {empty_cart_handle} from \"../actions/prostore\";\n\nfunction paymentHandler(src) {\n  return new Promise((resolve) => {\n    const script = document.createElement(\"script\");\n    script.src = src;\n    script.onload = () => {\n      resolve(true);\n    };\n    script.onerror = () => {\n      resolve(false);\n    };\n    document.body.appendChild(script);\n  });\n}\n\nfunction Checkout({ isAuthenticated, Cartvalue, User,EMPTY_TO_CART }) {\n\n  const [orderdata, setorderdata] = useState(0);\n\n  var Total = 0;\n  Cartvalue.map(\n    (Cartvalue) => (Total = Total + Cartvalue.price * Cartvalue.qty)\n  );\n  var ProdID = [];\n  Cartvalue.map((Cartvalue) => ProdID.push(Cartvalue.id));\n  var order_id = 0;\n\n  async function displayRazorpay() {\n    const res = await paymentHandler(\n      \"https://checkout.razorpay.com/v1/checkout.js\"\n    );\n    if (!res) {\n      alert(\"Razorpay SDK failed! Are You Online?\");\n      return;\n    }\n\n    const body = JSON.stringify({ Total: Total.toString() });\n    const reds = await axios.post(\n      `${process.env.REACT_APP_API_URL}/api/order/test/`,\n      body\n    );\n\n    var options = {\n      key: \"rzp_test_qcQMd5GfJhZAyQ\",\n      amount: reds.data[\"amount\"],\n      currency: reds.data[\"currency\"],\n      name: \"Ashion\",\n      description: \"Thank You For Freaking!\",\n      image: logo,\n      order_id: reds.data[\"id\"],\n      handler: function (response) {\n        const orderdetail = JSON.stringify({\n          id: User.id,\n          user: User.id,\n          total: Total,\n          payment_id: response.razorpay_payment_id,\n          order_id: response.razorpay_order_id,\n          signature: response.razorpay_signature,\n        });\n        axios\n          .post(\n            `${process.env.REACT_APP_API_URL}/api/orderdetail/`,\n            orderdetail\n          )\n          .then(function (response) {\n            order_id = response.data[\"id\"];\n\n            for (var i = 0; i < Cartvalue.length; i++) {\n              const orderitemdetail = JSON.stringify({\n                order: order_id,\n                qty: Cartvalue[i][\"qty\"],\n                product: Cartvalue[i][\"id\"],\n              });\n              axios.post(\n                `${process.env.REACT_APP_API_URL}/api/orderitemdetail/`,\n                orderitemdetail\n              );\n            }\n            toast(\"You order Is confirm \");\n            // setorderdata(1);\n            \n            // empty_cart_handle(10)\n            const deleteToCart = async (id) => {\n              await dispatch(load_product_actions.delete_to_cart_handle(id));\n            };\n            deleteToCart(1)\n            // setInterval(submitorderfunc, 4000);\n\n          });\n      },\n      prefill: {\n        name: User.first_name,\n        email: User.email,\n        contact: User.phone,\n      },\n    };\n\n    const paymentObject = new window.Razorpay(options);\n    paymentObject.open();\n  }\n\n  \n\n  function submitorderfunc() {\n    \n    setorderdata(1);    \n  }\n  \n  if (orderdata) return <Redirect to=\"/\" />;\n\n  \n  if (!isAuthenticated) return <Redirect to=\"/login\" />;\n\n\n  return (\n    <div className=\"checkout\">\n      <ToastContainer />\n      <div class=\"breadcrumb-option\">\n        <div class=\"container\">\n          <div class=\"row\">\n            <div class=\"col-lg-12\">\n              <div class=\"breadcrumb__links\">\n                <Link to=\"/\">\n                  <TiIcons.TiHome className=\"homeIcon\" /> Home\n                </Link>\n                <FaIcons.FaAngleRight />\n                <span>Shopping cart</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <section class=\"checkout spad\">\n        <div class=\"container\">\n          <div class=\"checkout__form\">\n            <div class=\"row\">\n              <div class=\"col-lg-8\">\n                <h5>Billing detail</h5>\n                <div class=\"row\">\n                  <div class=\"col-lg-6 col-md-6 col-sm-6\">\n                    <div class=\"checkout__form__input\">\n                      <p>\n                        First Name <span>*</span>\n                      </p>\n                      <input type=\"text\" disabled value={User.first_name} />\n                    </div>\n                  </div>\n                  <div class=\"col-lg-6 col-md-6 col-sm-6\">\n                    <div class=\"checkout__form__input\">\n                      <p>\n                        Last Name <span>*</span>\n                      </p>\n                      <input type=\"text\" disabled value={User.last_name} />\n                    </div>\n                  </div>\n                  <div class=\"col-lg-12\">\n                    <div class=\"checkout__form__input\">\n                      <p>\n                        Address <span>*</span>\n                      </p>\n                      <input type=\"text\" disabled value={User.address} />\n                    </div>\n                    <div class=\"checkout__form__input\">\n                      <p>\n                        Phone <span>*</span>\n                      </p>\n                      <input type=\"text\" disabled value={User.phone} />\n                    </div>\n                    <div class=\"checkout__form__input\">\n                      <p>\n                        Email <span>*</span>\n                      </p>\n                      <input type=\"text\" disabled value={User.email} />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"col-lg-4\">\n                <div class=\"checkout__order\">\n                  <h5>Your order</h5>\n                  <div class=\"checkout__order__product\">\n                    <ul>\n                      <li>\n                        <span class=\"top__text\">Product</span>\n\n                        <span class=\"top__text__right\">Total</span>\n                      </li>\n                      {Cartvalue.map((Cartvalue, index) => (\n                   \n                        <li key={index}>\n                          {index + 1}.{Cartvalue.title}\n                          <span>${Cartvalue.price * Cartvalue.qty}.00</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                  <div class=\"checkout__order__total\">\n                    <ul>\n                      <li>\n                        Subtotal <span>${Total}.00</span>\n                      </li>\n                      <li>\n                        Total <span>${Total}.00</span>\n                      </li>\n                    </ul>\n                  </div>\n\n                  <button\n                    type=\"submit\"\n                    class=\"site-btn\"\n                    onClick={displayRazorpay}\n                  >\n                    Place oder\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  Cartvalue: state.prostore.Cartvalue,\n  isAuthenticated: state.auth.isAuthenticated,\n  User: state.auth.user,\n});\n\nexport default connect(mapStateToProps,{empty_cart_handle})(Checkout);\n// export default connect(mapStateToProps, { login })(Login);\n"]},"metadata":{},"sourceType":"module"}