{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/rakshit/Desktop/webdev/mb/project/capstone-team2/frontend/src/pages/Checkout.js\";\nimport React from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport * as TiIcons from \"react-icons/ti\";\nimport * as FaIcons from \"react-icons/fa\";\n\nfunction paymentHandler(src) {\n  return new Promise(resolve => {\n    const script = document.createElement('script');\n    script.src = src;\n\n    script.onload = () => {\n      resolve(true);\n    };\n\n    script.onerror = () => {\n      resolve(false);\n    };\n\n    document.body.appendChild(script);\n  });\n}\n\n;\n\nfunction Checkout({\n  isAuthenticated,\n  Cartvalue,\n  User\n}) {\n  if (!isAuthenticated) return /*#__PURE__*/_jsxDEV(Redirect, {\n    to: \"/login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 12\n  }, this);\n  var Total = 0;\n  Cartvalue.map(Cartvalue => Total = Total + Cartvalue.price * Cartvalue.qty);\n  var ProdID = [];\n  Cartvalue.map(Cartvalue => ProdID.push(Cartvalue.id)); // console.log(Cartvalue[1][\"qty\"]);\n  // console.log(Cartvalue);\n\n  var order_id = 0;\n\n  async function displayRazorpay() {\n    const res = await paymentHandler('https://checkout.razorpay.com/v1/checkout.js');\n\n    if (!res) {\n      alert(\"Razorpay SDK failed! Are You Online?\");\n      return;\n    } // const data = await fetch(\"http://localhost:8000/api/order/test/\").then((dat)=>\n    //     dat.json()\n    // )\n\n\n    const body = JSON.stringify({\n      \"Total\": Total.toString()\n    });\n    const reds = await axios.post(`${process.env.REACT_APP_API_URL}/api/order/test/`, body); // console.log(data.id);\n    // console.log(reds.data[\"id\"]);\n\n    var options = {\n      \"key\": \"rzp_test_qcQMd5GfJhZAyQ\",\n      \"amount\": reds.data[\"amount\"],\n      \"currency\": reds.data[\"currency\"],\n      \"name\": \"Donatin\",\n      \"description\": \"Thank You For Freaking!\",\n      \"image\": \"./img/logo.wepp\",\n      \"order_id\": reds.data[\"id\"],\n      \"handler\": function (response) {\n        // const orderpassdata = await axios.post(`${process.env.REACT_APP_API_URL}/api/order/test/`, body);\n        // \"order\": 1,\n        // \"qty\": 9,\n        // \"product\": 4\n        const orderdetail = JSON.stringify({\n          \"id\": User.id,\n          \"user\": User.id,\n          \"total\": Total,\n          \"payment_id\": response.razorpay_payment_id,\n          \"order_id\": response.razorpay_order_id,\n          \"signature\": response.razorpay_signature\n        });\n        axios.post(`${process.env.REACT_APP_API_URL}/api/orderdetail/`, orderdetail).then(function (response) {\n          order_id = response.data[\"id\"]; // console.log(order_id);\n\n          for (var i = 0; i < Cartvalue.length; i++) {\n            const orderitemdetail = JSON.stringify({\n              \"order\": order_id,\n              \"qty\": Cartvalue[i][\"qty\"],\n              \"product\": Cartvalue[i][\"id\"]\n            });\n            axios.post(`${process.env.REACT_APP_API_URL}/api/orderitemdetail/`, orderitemdetail);\n          }\n\n          return /*#__PURE__*/_jsxDEV(Redirect, {\n            to: \"/\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 28\n          }, this);\n        }); //   console.log(order_id);\n        // alert(\"orderconfirm\");\n        // x=0\n        // console.log(x);\n        // alert(response.razorpay_payment_id);\n        // console.log(response.razorpay_payment_id);\n        // alert(response.razorpay_order_id);\n        // alert(response.razorpay_signature);\n      },\n      \"prefill\": {\n        \"name\": User.first_name,\n        \"email\": User.email,\n        \"contact\": User.phone\n      }\n    };\n    const paymentObject = new window.Razorpay(options);\n    paymentObject.open();\n  } // console.log(success);\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"checkout\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"breadcrumb-option\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"col-lg-12\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"breadcrumb__links\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: \"/\",\n                children: [/*#__PURE__*/_jsxDEV(TiIcons.TiHome, {\n                  className: \"homeIcon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 38\n                }, this), \" Home\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(FaIcons.FaAngleRight, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Shopping cart\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      class: \"checkout spad\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"checkout__form\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"col-lg-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                children: \"Billing detail\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"col-lg-6 col-md-6 col-sm-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"checkout__form__input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"First Name \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 173,\n                        columnNumber: 55\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 173,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      disabled: true,\n                      value: User.first_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 174,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"col-lg-6 col-md-6 col-sm-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"checkout__form__input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Last Name \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 179,\n                        columnNumber: 54\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 179,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      disabled: true,\n                      value: User.last_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 180,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"col-lg-12\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"checkout__form__input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Address \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 186,\n                        columnNumber: 52\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 186,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      disabled: true,\n                      value: User.address\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"checkout__form__input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Phone \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 191,\n                        columnNumber: 50\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 191,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      disabled: true,\n                      value: User.phone\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 192,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 190,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"checkout__form__input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Email \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 195,\n                        columnNumber: 50\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      disabled: true,\n                      value: User.email\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 196,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"col-lg-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"checkout__order\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  children: \"Your order\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"checkout__order__product\",\n                  children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        class: \"top__text\",\n                        children: \"Product\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 208,\n                        columnNumber: 45\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        class: \"top__text__right\",\n                        children: \"Total\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 210,\n                        columnNumber: 45\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 207,\n                      columnNumber: 41\n                    }, this), Cartvalue.map((Cartvalue, index) =>\n                    /*#__PURE__*/\n                    //   console.log(Cartvalue.title)   \n                    _jsxDEV(\"li\", {\n                      children: [index + 1, \".\", Cartvalue.title, /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: [\"$\", Cartvalue.price * Cartvalue.qty, \".00\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 215,\n                        columnNumber: 90\n                      }, this)]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 215,\n                      columnNumber: 47\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"checkout__order__total\",\n                  children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [\"Subtotal \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: [\"$\", Total, \".00\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 223,\n                        columnNumber: 54\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 223,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [\"Total \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: [\"$\", Total, \".00\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 224,\n                        columnNumber: 51\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 224,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  class: \"site-btn\",\n                  onClick: displayRazorpay,\n                  children: \"Place oder\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 9\n  }, this);\n}\n\n_c = Checkout;\n\nconst mapStateToProps = state => ({\n  Cartvalue: state.prostore.Cartvalue,\n  isAuthenticated: state.auth.isAuthenticated,\n  User: state.auth.user\n});\n\nexport default connect(mapStateToProps)(Checkout);\n\nvar _c;\n\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"sources":["/home/rakshit/Desktop/webdev/mb/project/capstone-team2/frontend/src/pages/Checkout.js"],"names":["React","Link","Redirect","connect","axios","TiIcons","FaIcons","paymentHandler","src","Promise","resolve","script","document","createElement","onload","onerror","body","appendChild","Checkout","isAuthenticated","Cartvalue","User","Total","map","price","qty","ProdID","push","id","order_id","displayRazorpay","res","alert","JSON","stringify","toString","reds","post","process","env","REACT_APP_API_URL","options","data","response","orderdetail","razorpay_payment_id","razorpay_order_id","razorpay_signature","then","i","length","orderitemdetail","first_name","email","phone","paymentObject","window","Razorpay","open","last_name","address","index","title","mapStateToProps","state","prostore","auth","user"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Link, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport * as TiIcons from \"react-icons/ti\";\nimport * as FaIcons from \"react-icons/fa\";\n\nfunction paymentHandler(src) {\n    return new Promise((resolve) => {\n        const script = document.createElement('script')\n        script.src = src        \n        script.onload = () => {\n            resolve(true)\n        }\n        script.onerror = () => {\n            resolve(false)\n        }\n        document.body.appendChild(script)\n    })    \n};\n\n\n\n\nfunction Checkout({isAuthenticated,Cartvalue,User}) {\n\n    if (!isAuthenticated)\n    return <Redirect to='/login' />;\n\n\n    var Total=0;\n    Cartvalue.map((Cartvalue) => Total=Total+Cartvalue.price*Cartvalue.qty)\n    var ProdID=[];\n    Cartvalue.map((Cartvalue) => ProdID.push(Cartvalue.id))\n    // console.log(Cartvalue[1][\"qty\"]);\n    // console.log(Cartvalue);\n    var order_id=0\n    \n    async function displayRazorpay() {\n        const res = await paymentHandler('https://checkout.razorpay.com/v1/checkout.js')\n        if (!res){\n            alert(\"Razorpay SDK failed! Are You Online?\")\n            return\n        }\n        // const data = await fetch(\"http://localhost:8000/api/order/test/\").then((dat)=>\n        //     dat.json()\n        // )\n        const body = JSON.stringify({ \"Total\":Total.toString() }); \n        const reds = await axios.post(`${process.env.REACT_APP_API_URL}/api/order/test/`, body);\n        // console.log(data.id);\n        // console.log(reds.data[\"id\"]);\n        var options = {\n            \"key\": \"rzp_test_qcQMd5GfJhZAyQ\", \n            \"amount\":reds.data[\"amount\"],\n            \"currency\": reds.data[\"currency\"],\n            \"name\": \"Donatin\",\n            \"description\": \"Thank You For Freaking!\",\n            \"image\": \"./img/logo.wepp\",\n            \"order_id\": reds.data[\"id\"],\n            \"handler\": function (response){\n                \n\n                // const orderpassdata = await axios.post(`${process.env.REACT_APP_API_URL}/api/order/test/`, body);\n\n                // \"order\": 1,\n                // \"qty\": 9,\n                // \"product\": 4\n        \n\n                const orderdetail = JSON.stringify({   \n                    \"id\":User.id,\n                    \"user\": User.id,\n                    \"total\": Total,                    \n                    \"payment_id\":response.razorpay_payment_id,\n                    \"order_id\":response.razorpay_order_id,\n                    \"signature\":response.razorpay_signature                                            \n                    }); \n                axios.post(`${process.env.REACT_APP_API_URL}/api/orderdetail/`, orderdetail).then(function (response) {                    \n                    order_id=response.data[\"id\"];\n                    // console.log(order_id);\n\n\n                    for (var i=0; i < Cartvalue.length; i++) {\n                    \n                        const orderitemdetail = JSON.stringify({                                                                 \n                            \"order\":order_id,\n                            \"qty\":Cartvalue[i][\"qty\"],\n                            \"product\":Cartvalue[i][\"id\"],                            \n\n                            }); \n                        axios.post(`${process.env.REACT_APP_API_URL}/api/orderitemdetail/`, orderitemdetail);\n                        \n                    } \n    \n                    return <Redirect to='/' />;\n                  })\n                //   console.log(order_id);\n       \n\n\n                \n                \n\n\n\n\n\n\n                \n                // alert(\"orderconfirm\");\n                // x=0\n                // console.log(x);\n                \n                // alert(response.razorpay_payment_id);\n                \n                // console.log(response.razorpay_payment_id);\n                // alert(response.razorpay_order_id);\n                \n                // alert(response.razorpay_signature);\n            },\n            \"prefill\": {\n                \"name\": User.first_name,\n                \"email\": User.email,\n                \"contact\": User.phone,\n            },\n            \n        };\n        \n        const paymentObject = new window.Razorpay(options);\n        paymentObject.open()        \n        \n        \n    }\n\n   \n\n\n\n  \n    // console.log(success);\n   \n        \n    return (\n        <div className=\"checkout\">\n            <div class=\"breadcrumb-option\">\n                <div class=\"container\">\n                <div class=\"row\">\n                    <div class=\"col-lg-12\">\n                        <div class=\"breadcrumb__links\">\n                        <Link to='/'><TiIcons.TiHome className=\"homeIcon\"/> Home</Link>\n                        <FaIcons.FaAngleRight/>\n                            <span>Shopping cart</span>\n                        </div>\n                    </div>\n                </div>\n                </div>\n            </div>  \n\n \n\n\n\n            <section class=\"checkout spad\">\n            <div class=\"container\">\n                \n                <div class=\"checkout__form\">\n                    <div class=\"row\">\n                        <div class=\"col-lg-8\">\n                            <h5>Billing detail</h5>\n                            <div class=\"row\">\n                                <div class=\"col-lg-6 col-md-6 col-sm-6\">\n                                    <div class=\"checkout__form__input\">\n                                        <p>First Name <span>*</span></p>\n                                        <input type=\"text\" disabled value={User.first_name}/>\n                                    </div>\n                                </div>\n                                <div class=\"col-lg-6 col-md-6 col-sm-6\">\n                                    <div class=\"checkout__form__input\">\n                                        <p>Last Name <span>*</span></p>\n                                        <input type=\"text\" disabled value={User.last_name}/>\n                                    </div>\n                                </div>\n                                <div class=\"col-lg-12\">\n                                   \n                                    <div class=\"checkout__form__input\">\n                                        <p>Address <span>*</span></p>\n                                        <input type=\"text\"disabled value={User.address}/>\n                                    \n                                    </div>\n                                    <div class=\"checkout__form__input\">\n                                        <p>Phone <span>*</span></p>\n                                        <input type=\"text\" disabled value={User.phone}/>\n                                    </div>   \n                                    <div class=\"checkout__form__input\">\n                                        <p>Email <span>*</span></p>\n                                        <input type=\"text\" disabled value={User.email}/>\n                                    </div>                         \n                                </div>\n                    \n                            </div>\n                        </div>\n                        <div class=\"col-lg-4\">\n                            <div class=\"checkout__order\">\n                                <h5>Your order</h5>\n                                <div class=\"checkout__order__product\">\n                                    <ul>\n                                        <li>\n                                            <span class=\"top__text\">Product</span>\n                                         \n                                            <span class=\"top__text__right\">Total</span>\n                                            \n                                        </li>\n                                        {Cartvalue.map((Cartvalue, index) => ( \n                                            //   console.log(Cartvalue.title)   \n                                              <li key={index}>{index+1}.{Cartvalue.title}<span>${Cartvalue.price*Cartvalue.qty}.00</span></li>\n\n                                               ))}\n                                      \n                                    </ul>\n                                </div>\n                                <div class=\"checkout__order__total\">\n                                    <ul>\n                                        <li>Subtotal <span>${Total}.00</span></li>\n                                        <li>Total <span>${Total}.00</span></li>\n                                    </ul>\n                                </div>\n                                                              \n                                <button type=\"submit\" class=\"site-btn\" onClick={displayRazorpay}>Place oder</button>\n                                \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </section>\n    \n\n\n        </div>\n\n\n\n    )\n}\n\n\nconst mapStateToProps = state => ({\n    Cartvalue: state.prostore.Cartvalue,\n    isAuthenticated: state.auth.isAuthenticated,\n    User:state.auth.user,\n    \n});\n\nexport default connect(mapStateToProps)(Checkout);\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}