{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/rakshit/Desktop/webdev/mb/project/capstone-team2/frontend/src/pages/Checkout.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport * as TiIcons from \"react-icons/ti\";\nimport * as FaIcons from \"react-icons/fa\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nfunction paymentHandler(src) {\n  return new Promise(resolve => {\n    const script = document.createElement(\"script\");\n    script.src = src;\n\n    script.onload = () => {\n      resolve(true);\n    };\n\n    script.onerror = () => {\n      resolve(false);\n    };\n\n    document.body.appendChild(script);\n  });\n}\n\nfunction Checkout({\n  isAuthenticated,\n  Cartvalue,\n  User\n}) {\n  _s();\n\n  const [orderdata, setorderdata] = useState(0);\n  var Total = 0;\n  Cartvalue.map(Cartvalue => Total = Total + Cartvalue.price * Cartvalue.qty);\n  var ProdID = [];\n  Cartvalue.map(Cartvalue => ProdID.push(Cartvalue.id));\n  var order_id = 0;\n\n  async function displayRazorpay() {\n    const res = await paymentHandler(\"https://checkout.razorpay.com/v1/checkout.js\");\n\n    if (!res) {\n      alert(\"Razorpay SDK failed! Are You Online?\");\n      return;\n    }\n\n    const body = JSON.stringify({\n      Total: Total.toString()\n    });\n    const reds = await axios.post(`${process.env.REACT_APP_API_URL}/api/order/test/`, body);\n    var options = {\n      key: \"rzp_test_qcQMd5GfJhZAyQ\",\n      amount: reds.data[\"amount\"],\n      currency: reds.data[\"currency\"],\n      name: \"Donatin\",\n      description: \"Thank You For Freaking!\",\n      image: \"./img/logo.wepp\",\n      order_id: reds.data[\"id\"],\n      handler: function (response) {\n        const orderdetail = JSON.stringify({\n          id: User.id,\n          user: User.id,\n          total: Total,\n          payment_id: response.razorpay_payment_id,\n          order_id: response.razorpay_order_id,\n          signature: response.razorpay_signature\n        });\n        axios.post(`${process.env.REACT_APP_API_URL}/api/orderdetail/`, orderdetail).then(function (response) {\n          order_id = response.data[\"id\"];\n\n          for (var i = 0; i < Cartvalue.length; i++) {\n            const orderitemdetail = JSON.stringify({\n              order: order_id,\n              qty: Cartvalue[i][\"qty\"],\n              product: Cartvalue[i][\"id\"]\n            });\n            axios.post(`${process.env.REACT_APP_API_URL}/api/orderitemdetail/`, orderitemdetail);\n          }\n\n          toast(\"You order Is confirm \"); // setorderdata(1);\n\n          setInterval(submitorderfunc, 4000);\n        });\n      },\n      prefill: {\n        name: User.first_name,\n        email: User.email,\n        contact: User.phone\n      }\n    };\n    const paymentObject = new window.Razorpay(options);\n    paymentObject.open();\n  } // function submitfunc() {\n  //   setsubmitFlag(1);\n  // }\n\n\n  if (orderdata) return /*#__PURE__*/_jsxDEV(Redirect, {\n    to: \"/\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 25\n  }, this);\n  if (!isAuthenticated) return /*#__PURE__*/_jsxDEV(Redirect, {\n    to: \"/login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 32\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"checkout\",\n    children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"breadcrumb-option\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"col-lg-12\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"breadcrumb__links\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: \"/\",\n                children: [/*#__PURE__*/_jsxDEV(TiIcons.TiHome, {\n                  className: \"homeIcon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 19\n                }, this), \" Home\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FaIcons.FaAngleRight, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Shopping cart\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      class: \"checkout spad\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"checkout__form\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"col-lg-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                children: \"Billing detail\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"col-lg-6 col-md-6 col-sm-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"checkout__form__input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"First Name \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 144,\n                        columnNumber: 36\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 143,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      disabled: true,\n                      value: User.first_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 146,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 142,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"col-lg-6 col-md-6 col-sm-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"checkout__form__input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Last Name \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 152,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 151,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      disabled: true,\n                      value: User.last_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 154,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"col-lg-12\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"checkout__form__input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Address \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 160,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 159,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      disabled: true,\n                      value: User.address\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 162,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 158,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"checkout__form__input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Phone \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 166,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 165,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      disabled: true,\n                      value: User.phone\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 168,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"checkout__form__input\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Email \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 172,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 171,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      disabled: true,\n                      value: User.email\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 174,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"col-lg-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"checkout__order\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  children: \"Your order\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"checkout__order__product\",\n                  children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        class: \"top__text\",\n                        children: \"Product\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 185,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        class: \"top__text__right\",\n                        children: \"Total\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 187,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 184,\n                      columnNumber: 23\n                    }, this), Cartvalue.map((Cartvalue, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [index + 1, \".\", Cartvalue.title, /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: [\"$\", Cartvalue.price * Cartvalue.qty, \".00\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 193,\n                        columnNumber: 27\n                      }, this)]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 191,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"checkout__order__total\",\n                  children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [\"Subtotal \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: [\"$\", Total, \".00\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 201,\n                        columnNumber: 34\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 200,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [\"Total \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: [\"$\", Total, \".00\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 204,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 203,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  class: \"site-btn\",\n                  onClick: displayRazorpay,\n                  children: \"Place oder\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Checkout, \"dHFYI2GFI2p0736N07TnddCRH48=\");\n\n_c = Checkout;\n\nconst mapStateToProps = state => ({\n  Cartvalue: state.prostore.Cartvalue,\n  isAuthenticated: state.auth.isAuthenticated,\n  User: state.auth.user\n});\n\nexport default connect(mapStateToProps)(Checkout);\n\nvar _c;\n\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"sources":["/home/rakshit/Desktop/webdev/mb/project/capstone-team2/frontend/src/pages/Checkout.js"],"names":["React","useState","Link","Redirect","connect","axios","TiIcons","FaIcons","ToastContainer","toast","paymentHandler","src","Promise","resolve","script","document","createElement","onload","onerror","body","appendChild","Checkout","isAuthenticated","Cartvalue","User","orderdata","setorderdata","Total","map","price","qty","ProdID","push","id","order_id","displayRazorpay","res","alert","JSON","stringify","toString","reds","post","process","env","REACT_APP_API_URL","options","key","amount","data","currency","name","description","image","handler","response","orderdetail","user","total","payment_id","razorpay_payment_id","razorpay_order_id","signature","razorpay_signature","then","i","length","orderitemdetail","order","product","setInterval","submitorderfunc","prefill","first_name","email","contact","phone","paymentObject","window","Razorpay","open","last_name","address","index","title","mapStateToProps","state","prostore","auth"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport * as TiIcons from \"react-icons/ti\";\nimport * as FaIcons from \"react-icons/fa\";\n\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nfunction paymentHandler(src) {\n  return new Promise((resolve) => {\n    const script = document.createElement(\"script\");\n    script.src = src;\n    script.onload = () => {\n      resolve(true);\n    };\n    script.onerror = () => {\n      resolve(false);\n    };\n    document.body.appendChild(script);\n  });\n}\n\nfunction Checkout({ isAuthenticated, Cartvalue, User }) {\n\n  const [orderdata, setorderdata] = useState(0);\n\n  var Total = 0;\n  Cartvalue.map(\n    (Cartvalue) => (Total = Total + Cartvalue.price * Cartvalue.qty)\n  );\n  var ProdID = [];\n  Cartvalue.map((Cartvalue) => ProdID.push(Cartvalue.id));\n  var order_id = 0;\n\n  async function displayRazorpay() {\n    const res = await paymentHandler(\n      \"https://checkout.razorpay.com/v1/checkout.js\"\n    );\n    if (!res) {\n      alert(\"Razorpay SDK failed! Are You Online?\");\n      return;\n    }\n\n    const body = JSON.stringify({ Total: Total.toString() });\n    const reds = await axios.post(\n      `${process.env.REACT_APP_API_URL}/api/order/test/`,\n      body\n    );\n\n    var options = {\n      key: \"rzp_test_qcQMd5GfJhZAyQ\",\n      amount: reds.data[\"amount\"],\n      currency: reds.data[\"currency\"],\n      name: \"Donatin\",\n      description: \"Thank You For Freaking!\",\n      image: \"./img/logo.wepp\",\n      order_id: reds.data[\"id\"],\n      handler: function (response) {\n        const orderdetail = JSON.stringify({\n          id: User.id,\n          user: User.id,\n          total: Total,\n          payment_id: response.razorpay_payment_id,\n          order_id: response.razorpay_order_id,\n          signature: response.razorpay_signature,\n        });\n        axios\n          .post(\n            `${process.env.REACT_APP_API_URL}/api/orderdetail/`,\n            orderdetail\n          )\n          .then(function (response) {\n            order_id = response.data[\"id\"];\n\n            for (var i = 0; i < Cartvalue.length; i++) {\n              const orderitemdetail = JSON.stringify({\n                order: order_id,\n                qty: Cartvalue[i][\"qty\"],\n                product: Cartvalue[i][\"id\"],\n              });\n              axios.post(\n                `${process.env.REACT_APP_API_URL}/api/orderitemdetail/`,\n                orderitemdetail\n              );\n            }\n            toast(\"You order Is confirm \");\n            // setorderdata(1);\n            setInterval(submitorderfunc, 4000);\n          });\n      },\n      prefill: {\n        name: User.first_name,\n        email: User.email,\n        contact: User.phone,\n      },\n    };\n\n    const paymentObject = new window.Razorpay(options);\n    paymentObject.open();\n  }\n\n\n\n  // function submitfunc() {\n  //   setsubmitFlag(1);\n  // }\n  if (orderdata) return <Redirect to=\"/\" />;\n\n  \n  if (!isAuthenticated) return <Redirect to=\"/login\" />;\n\n\n  return (\n    <div className=\"checkout\">\n      <ToastContainer />\n      <div class=\"breadcrumb-option\">\n        <div class=\"container\">\n          <div class=\"row\">\n            <div class=\"col-lg-12\">\n              <div class=\"breadcrumb__links\">\n                <Link to=\"/\">\n                  <TiIcons.TiHome className=\"homeIcon\" /> Home\n                </Link>\n                <FaIcons.FaAngleRight />\n                <span>Shopping cart</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <section class=\"checkout spad\">\n        <div class=\"container\">\n          <div class=\"checkout__form\">\n            <div class=\"row\">\n              <div class=\"col-lg-8\">\n                <h5>Billing detail</h5>\n                <div class=\"row\">\n                  <div class=\"col-lg-6 col-md-6 col-sm-6\">\n                    <div class=\"checkout__form__input\">\n                      <p>\n                        First Name <span>*</span>\n                      </p>\n                      <input type=\"text\" disabled value={User.first_name} />\n                    </div>\n                  </div>\n                  <div class=\"col-lg-6 col-md-6 col-sm-6\">\n                    <div class=\"checkout__form__input\">\n                      <p>\n                        Last Name <span>*</span>\n                      </p>\n                      <input type=\"text\" disabled value={User.last_name} />\n                    </div>\n                  </div>\n                  <div class=\"col-lg-12\">\n                    <div class=\"checkout__form__input\">\n                      <p>\n                        Address <span>*</span>\n                      </p>\n                      <input type=\"text\" disabled value={User.address} />\n                    </div>\n                    <div class=\"checkout__form__input\">\n                      <p>\n                        Phone <span>*</span>\n                      </p>\n                      <input type=\"text\" disabled value={User.phone} />\n                    </div>\n                    <div class=\"checkout__form__input\">\n                      <p>\n                        Email <span>*</span>\n                      </p>\n                      <input type=\"text\" disabled value={User.email} />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"col-lg-4\">\n                <div class=\"checkout__order\">\n                  <h5>Your order</h5>\n                  <div class=\"checkout__order__product\">\n                    <ul>\n                      <li>\n                        <span class=\"top__text\">Product</span>\n\n                        <span class=\"top__text__right\">Total</span>\n                      </li>\n                      {Cartvalue.map((Cartvalue, index) => (\n                   \n                        <li key={index}>\n                          {index + 1}.{Cartvalue.title}\n                          <span>${Cartvalue.price * Cartvalue.qty}.00</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                  <div class=\"checkout__order__total\">\n                    <ul>\n                      <li>\n                        Subtotal <span>${Total}.00</span>\n                      </li>\n                      <li>\n                        Total <span>${Total}.00</span>\n                      </li>\n                    </ul>\n                  </div>\n\n                  <button\n                    type=\"submit\"\n                    class=\"site-btn\"\n                    onClick={displayRazorpay}\n                  >\n                    Place oder\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  Cartvalue: state.prostore.Cartvalue,\n  isAuthenticated: state.auth.isAuthenticated,\n  User: state.auth.user,\n});\n\nexport default connect(mapStateToProps)(Checkout);\n"]},"metadata":{},"sourceType":"module"}